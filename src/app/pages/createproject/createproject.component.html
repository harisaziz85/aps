<div class="main">
  <app-topbar heading="Projects and Buildings"></app-topbar>
  <div>
    <span></span>
  </div>

  <div class="onestbold head2">
    <a routerLink="/pages/project-building" style="color:black; text-decoration:none;">
      <app-svg-icons icon="back" size="16"></app-svg-icons>
      Project Name
    </a>
  </div>
  <!-- Nav Tabs -->
  <div class="tab-container position-relative">
    <ul class="nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active onestbold" id="project-attributes-tab" data-bs-toggle="tab"
          data-bs-target="#project-attributes" type="button" role="tab">
          Project Attributes
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link onestbold" id="standards-tab" data-bs-toggle="tab" data-bs-target="#standards" type="button"
          role="tab">
          Standards Attribute
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link onestbold" id="building-hierarchy-tab" data-bs-toggle="tab" data-bs-target="#building-hierarchy"
          type="button" role="tab">
          Building Hierarchy
        </button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link onestbold" id="upload-documents-tab" data-bs-toggle="tab" data-bs-target="#upload-documents"
          type="button onestbold" role="tab">
          Upload Documents
        </button>
      </li>
     <li class="nav-item" role="presentation">
  <button class="nav-link onestbold" id="reports-tab" data-bs-toggle="tab" data-bs-target="#reports" type="button" role="tab" style="color: #A4A3A2 !important;" disabled>
    Project Reports
  </button>
</li>
    </ul>
  </div>




  <!-- Tab Content -->
  <div class="tab-content mt-3" id="myTabContent">











    <div class="tab-pane fade show active" id="project-attributes" role="tabpanel">
      <div class="row">
        <div class="col-8">
          <div class="card card1">
            <p class="head onestbold">Project Name</p>
            <p class="txt robotoregular" style="line-height: 5px; margin-bottom: 6px;">Pic (Optional)</p>


            <div class="igm1 d-flex align-items-center justify-content-center text-center"
              style="border: 2px dashed #ccc; background-color: #f9f9f9; border-radius: 8px; width: 120px; height: 120px; cursor: pointer;"
              (click)="openFileInput()">
              <div *ngIf="!imagePreview; else showImage">
                <span>
                  <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3.76172 14.989L9.83572 8.914C10.6167 8.133 11.8827 8.133 12.6637 8.914L15.2497 11.5"
                      stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                      d="M13.25 2.75H4.75C3.64543 2.75 2.75 3.64543 2.75 4.75V13.25C2.75 14.3546 3.64543 15.25 4.75 15.25H13.25C14.3546 15.25 15.25 14.3546 15.25 13.25V4.75C15.25 3.64543 14.3546 2.75 13.25 2.75Z"
                      stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                    <path
                      d="M6.25 8.5C6.94036 8.5 7.5 7.94036 7.5 7.25C7.5 6.55964 6.94036 6 6.25 6C5.55964 6 5 6.55964 5 7.25C5 7.94036 5.55964 8.5 6.25 8.5Z"
                      fill="#0F0F0F" />
                  </svg>
                </span>
                <p class="robotoregular droptext">Drag and Drop or Browse</p>
                <input type="file" (change)="onImageFileChange($event)" style="display:none" id="fileInput"
                  accept="image/*">
              </div>
              <ng-template #showImage>
                <img [src]="imagePreview" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;"
                  alt="Uploaded Image">
              </ng-template>
            </div>
            <div class="row">
              <div class="col-6">
                <div class="">
                  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Project <span class="star">*</span>
                  </p>
                  <div class="input-container">
                    <app-svg-icons icon="project1" size="16"></app-svg-icons>
                    <input type="text" [(ngModel)]="projectName">
                  </div>
                </div>
              </div>
              <div class="col-6">
                <div class="">
                  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Building <span
                      class="star">*</span></p>
                  <div class="input-container">
                    <app-svg-icons icon="building" size="16"></app-svg-icons>
                    <input type="text" [(ngModel)]="buildingName">
                  </div>
                </div>
              </div>
              <p class="robotobold txt" style="margin-top: 16px; margin-bottom: 4px;">The project must have at least one
                sub-project, with a defined category.</p>
              <p class="robotoregular txt mb-0">Categories of first sub-project</p>
             <div class="col-6 mb-3">
  <div class="d-flex">
    <div class="custom-dropdown" (click)="toggleDropdown12($event)" id="dropdown-toggle-8">
      <span class="icon">
        <app-svg-icons icon="sub" size="16"></app-svg-icons>
      </span>
      <input type="text" [(ngModel)]="dropdown8.selected" readonly placeholder="Type or select..." />
      <span class="arrow">
        <app-svg-icons icon="down" size="16"></app-svg-icons>
      </span>
      <div class="dropdown-menu" *ngIf="dropdown8.isOpen">
        <div *ngFor="let option of dropdown8.options" (click)="selectOption8(dropdown8, option, $event)">
          {{ option }}
        </div>
      </div>
    </div>
    <div class="ms-3">
      <button class="w3btn robotomedium fs-5" (click)="addTag()">+ Add</button>
    </div>
  </div>
  <!-- Tags -->
 <div class="tags-container mt-2">
  <span class="tags robotoregular" *ngFor="let tag of addedTags; let i = index">
    {{ tag }}
    <button class="remove-tag" type="button" (click)="removeTag(i, $event)">
      <app-svg-icons icon="tag" size="16"></app-svg-icons>
    </button>
  </span>
</div>
</div>
            </div>
          </div>
          <div class="card card1">
            <p class="onestbold head">Address</p>
            <div class="row mt-3">
              <div class="col-6 mb-3">
                <div class="">
                  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Job Site Address Line 1</p>
                  <div class="input-container">
                    <app-svg-icons icon="location" size="16"></app-svg-icons>
                    <input type="text" [(ngModel)]="addressLine1">
                  </div>
                </div>
              </div>
              <div class="col-6 mb-3">
                <div class="">
                  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Job Site Address Line 2</p>
                  <div class="input-container">
                    <app-svg-icons icon="location" size="16"></app-svg-icons>
                    <input type="text" [(ngModel)]="addressLine2">
                  </div>
                </div>
              </div>
              <div class="col-6 mb-3">
                <div class="">
                  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">City</p>
                  <div class="input-container">
                    <app-svg-icons icon="location" size="16"></app-svg-icons>
                    <input type="text" [(ngModel)]="city">
                  </div>
                </div>
              </div>
              <div class="col-6 mb-3">
                <div class="">
                  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">State</p>
                  <div class="input-container">
                    <app-svg-icons icon="location" size="16"></app-svg-icons>
                    <input type="text" [(ngModel)]="state">
                  </div>
                </div>
              </div>
              <div class="col-6 mb-3">
                <div class="">
                  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Zip</p>
                  <div class="input-container">
                    <app-svg-icons icon="id" size="16"></app-svg-icons>
                    <input type="text" [(ngModel)]="zip">
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card card1">
            <p class="onestbold head">Project Administration</p>
            <div class="row mt-3">
              <div class="col-6 mb-3">
               <div class="">
  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Project Status</p>
  <div class="custom-dropdown" (click)="toggleDropdown($event)" id="dropdown-toggle-status" [ngClass]="{
        'status-active': selectedOption === 'Active' || !selectedOption,
        'status-completed': selectedOption === 'Completed'
      }">
    <app-svg-icons icon="status2" size="16"></app-svg-icons>
    <input
      type="text"
      [value]="selectedOption || 'Active'"
      placeholder="Select an option"
      readonly
      
      (click)="toggleDropdown($event)"
    />
    <span class="arrow">
      <app-svg-icons icon="down" size="16"></app-svg-icons>
    </span>
    <div class="dropdown-menu" *ngIf="isDropdownOpen">
      <div *ngFor="let option of options" (click)="selectOption(option, $event)">{{ option }}</div>
    </div>
  </div>
</div>
              </div>
              <div class="col-6 mb-3 w-50">
                <div class="w-100">
                  <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Hierarchy Levels Change with Mobile
                    Phone?</p>
                 <div class="custom-dropdown" (click)="toggleDropdown6($event)" id="dropdown-toggle-6">
  <app-svg-icons icon="hierarchy" size="16"></app-svg-icons>
  <input type="text" [value]="selectedOption6" placeholder="Select an option" readonly
         (click)="toggleDropdown6($event)" />
  <span class="arrow">
    <app-svg-icons icon="down" size="16"></app-svg-icons>
  </span>
  <div class="dropdown-menu" *ngIf="isDropdownOpen6">
    <div *ngFor="let option of options6" (click)="selectOption6(option, $event)">{{ option }}</div>
  </div>
</div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-4">
          <div class="card card1">
            <p class="onestbold head">Subcontractor Info</p>
            <div class="col-12 mb-3">
              <div class="">
                <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Subcontractor Name</p>
                <div class="input-container">
                  <app-svg-icons icon="user1" size="16"></app-svg-icons>
                  <input type="text" [(ngModel)]="subcontractorName">
                </div>
              </div>
            </div>
            <div class="col-12 mb-3">
              <div class="">
                <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Subcontractor (contact person)</p>
                <div class="input-container">
                  <app-svg-icons icon="user1" size="16"></app-svg-icons>
                  <input type="text" [(ngModel)]="subcontractorContactPerson">
                </div>
              </div>
            </div>
            <div class="col-12 mb-3">
              <div class="">
                <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Subcontractor (phone number)</p>
                <div class="input-container">
                  <app-svg-icons icon="phone" size="16"></app-svg-icons>
                  <input type="text" [(ngModel)]="subcontractorPhone">
                </div>
              </div>
            </div>
          </div>
          <div class="card card1">
            <p class="onestbold head">Client Info</p>
            <div class="col-12 mb-3 p-0 w-100">
              <div class="">
                <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Client Name</p>
              <div class="custom-dropdown" (click)="toggleDropdown7($event)" id="dropdown-toggle-7">
  <app-svg-icons icon="user1" size="16"></app-svg-icons>
  <input type="text" [value]="selectedOption7" placeholder="Select an option" readonly />
  <span class="arrow">
    <app-svg-icons icon="down" size="16"></app-svg-icons>
  </span>
  <div class="dropdown-menu" *ngIf="isDropdownOpen7">
    <div *ngFor="let option of options7" 
     (click)="selectOption7(option); $event.stopPropagation()">
  {{ option }}
</div>
  </div>
</div>
              </div>
            </div>
            <div class="col-12 mb-3">
              <div class="">
                <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Client (contact person)</p>
                <div class="input-container">
                  <app-svg-icons icon="user1" size="16"></app-svg-icons>
                  <input type="text" [(ngModel)]="clientContactPerson">
                </div>
              </div>
            </div>
            <div class="col-12 mb-3">
              <div class="">
                <p for="exampleInputEmail1" class="robotoregular txt d-block mb-1">Client (phone number)</p>
                <div class="input-container">
                  <app-svg-icons icon="phone" size="16"></app-svg-icons>
                  <input type="text" [(ngModel)]="clientPhone">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Submit Project Attributes Button -->
      <div class="row mt-4 mb-3">
        <div class="col-12 text-center">
          
          <button class="btn btn-primary123 robotomedium fs-5" (click)="submitProjectAttributes()">
            Next <span class="ms-1" style="margin-top: -2px;">
              <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.75 8.75H15C15.1379 8.75 15.25 8.86214 15.25 9C15.25 9.13786 15.1379 9.25 15 9.25H2.75C2.61214 9.25 2.5 9.13786 2.5 9C2.5 8.86214 2.61214 8.75 2.75 8.75Z" fill="white" stroke="white"/>
<path d="M10.9997 14C10.8077 14 10.6158 13.927 10.4698 13.78C10.1768 13.487 10.1768 13.012 10.4698 12.719L14.1897 8.99901L10.4698 5.27901C10.1768 4.98601 10.1768 4.51101 10.4698 4.21801C10.7628 3.92501 11.2377 3.92501 11.5307 4.21801L15.7807 8.46801C16.0738 8.76101 16.0738 9.23601 15.7807 9.52901L11.5307 13.779C11.3847 13.925 11.1928 13.999 11.0008 13.999L10.9997 14Z" fill="white"/>
</svg>

</span>
          </button>
        </div>
      </div>
    </div>







    <!-- template-selector.component.html -->


<div class="tab-pane fade" id="standards" role="tabpanel">
  <div class="row">
    <div class="col-9">
      <!-- Template Selection -->
      <div class="card card1">
        <p class="onestbold head">Template Selection</p>
        <div class="row">
          <div class="col-6">
            <p class="robotoregular txt mb">Template Name <span class="star">*</span></p>
            <div class="custom-dropdown1" id="dropdown-toggle-li" (click)="toggleDropdownli($event)">
             
              <input type="text" class="form-control12" [(ngModel)]="templateName" [value]="selectedOptionli.label" placeholder="Select a template name" readonly />
              <span class="arrow">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15.25 6.5L9 12.75L2.75 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
              <div class="dropdown-menu" *ngIf="isDropdownOpenli" (click)="stopPropagation($event)">
                <div class="dropdown-item" *ngFor="let option of optionsli" (click)="selectOptionli(option)">
                  {{ option.label }}
                </div>
              </div>
            </div>
          </div>
          <div class="col-6 d-flex align-items-center gap-2 mt-3">
            <input type="checkbox" class="check1" id="defaultTemplate" [(ngModel)]="isDefaultTemplate" (change)="setDefaultTemplate($event)">
            <p class="robotoregular txt2 mb-0">Set as Default</p>
          </div>
        </div>
      </div>

      <!-- Product and Approval Documents -->
      <div class="card card1">
        <div class="row">
          <div class="col-6">
            <label for="productId" class="robotoregular txt mb">Product ID <span class="star">*</span></label>
           <div class="form-group position-relative">
  <select class="form-control custom-select-icon" id="productId" [(ngModel)]="productId" (change)="onProductChange()" style="border-radius: 10px; border: 1px solid #ccc; -webkit-appearance: none; -moz-appearance: none; appearance: none;">
    <option value="" disabled selected>Select a product</option>
    <option *ngFor="let product of products" [value]="product.id">{{ product.name }}</option>
  </select>
  <span class="dropdown-icon">
    <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </span>
</div>
          </div>
          <div class="col-6">
            <label for="approvalDocuments" class="robotoregular txt mb">Approval Documents <span class="star">*</span></label>
            <div class="form-group position-relative">
              <select class="form-control custom-select-icon" id="approvalDocuments" (change)="addApprovalDocument($event)" style="border-radius: 15px;">
                <option value="" disabled selected>Select approval documents</option>
                <option *ngFor="let doc of filteredApprovalDocuments" [value]="doc.id">{{ doc.name }}</option>
              </select>
              <span class="dropdown-icon">
                <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </div>
            <div class="mt-2 d-flex flex-wrap gap-2">
              <span *ngFor="let docId of selectedApprovalDocuments; let i = index" class="bg12 d-inline-block position-relative">
                {{ getApprovalDocumentName(docId) }}
                <button class="btn1cls" (click)="removeApprovalDocument(i)"></button>
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Attribute -->
      <div class="card card1">
        <div class="d-flex align-items-center gap-2">
          <div class="wid2">
            <label class="robotoregular txt mb">Attribute Name <span class="star">*</span></label>
            <input type="text" class="form-control" [(ngModel)]="attributeName" placeholder="Enter attribute name">
          </div>
          <div class="wid2">
            <label class="robotoregular txt mb">Attribute Type <span class="star">*</span></label>
            <div class="form-group position-relative">
              <select class="form-control custom-select-icon" [(ngModel)]="attributeType">
                <option value="string">Free Text</option>
                <option value="list">List of Values</option>
              </select>
              <span class="dropdown-icon">
                <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
            </div>
          </div>
          <div class="wid2">
            <label class="robotoregular txt mb">Barrier Values</label>
            <div class="d-flex">
              <input type="text" class="form-control" [(ngModel)]="barrierInput" placeholder="Enter barrier value">
            </div>
          </div>
          <div class="wid3">
            <button class="btn btn-dark mt-3 valuebtn robotosemibold" (click)="addBarrierValue(-1)">+ Value</button>
          </div>
        </div>
        <div class="d-flex" style="margin-top: 14px;">
  <div style="width: 50%;" class="d-flex flex-column">
    <div class="d-flex">
      <div style="width: 50%;">
        <div class="d-flex align-items-center gap-2 mt-3">
          <input class="check1" type="checkbox" [(ngModel)]="mainAttribute.editableInBackOffice" id="editableMain">
          <p class="robotoregular txt2 mb-0">Editable in Back Office</p>
        </div>
      </div>
      <div style="width: 50%;">
        <div class="d-flex align-items-center gap-2 mt-3">
          <input class="check1" type="checkbox" [(ngModel)]="mainAttribute.hideForMobile" id="hideMain">
          <p class="robotoregular txt2 mb-0">Hide for Mobile</p>
        </div>
      </div>
    </div>
    <div style="width: 100%;" class="d-flex align-items-center gap-2 mt-3">
      <input class="check1" type="checkbox" [(ngModel)]="mainAttribute.isConditional" id="conditionalMain" (change)="toggleCheckbox(-1, 'isConditional', $event)">
      <p class="robotoregular txt2 mb-0">Conditional Attribute</p>
    </div>
  </div>
  <div style="width: 50%;">
    <div class="wid-4 d-flex ms-1">
      <div class="mt-2 ms-5 d-flex flex-wrap">
        <span *ngFor="let value of barrierValues; let i = index" class="bg12 d-inline-block position-relative">
          {{ value }}
          <button class="btn1cls" (click)="removeBarrierValue(i, -1)"></button>
        </span>
      </div>
    </div>
  </div>
</div>
        <div class="col-12 mt-3">
         
          <div class="mt-2" *ngIf="mainAttribute.isConditional">
            <div class="row">
              <div class="col-6">
                <label class="robotoregular txt mb-1">Product ID</label>
                <div class="form-group position-relative">
                  <select class="form-control custom-select-icon" id="mainProductId" [(ngModel)]="mainAttribute.productId" (change)="onConditionalProductChange(-1)">
                    <option value="" disabled>Select a product</option>
                    <option *ngFor="let product of products" [value]="product.id">{{ product.name }}</option>
                  </select>
                  <span class="dropdown-icon">
                    <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                </div>
              </div>
              <div class="col-6">
                <label class="robotoregular txt mb-1">Approval Document</label>
                <div class="form-group position-relative">
                  <select class="form-control custom-select-icon" id="mainApprovalDocument" (change)="addMainConditionalApprovalDocument($event)">
                    <option value="" disabled selected>Select an approval document</option>
                    <option *ngFor="let doc of mainAttribute.filteredApprovalDocuments" [value]="doc.id">{{ doc.name }}</option>
                  </select>
                  <span class="dropdown-icon">
                    <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                </div>
                <div class="mt-2 d-flex flex-wrap gap-2">
                  <span *ngFor="let docId of mainAttribute.selectedApprovalDocuments; let i = index" class="bg12 d-inline-block position-relative">
                    {{ getApprovalDocumentName(docId) }}
                    <button class="btn1cls" (click)="removeMainConditionalApprovalDocument(i)"></button>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Additional Attributes -->
      <div class="card card1" *ngFor="let attr of additionalAttributes; let i = index">
        <div class="d-flex justify-content-between align-items-center">
          <div class="d-flex align-items-center gap-2 w-100">
            <div  style="width: 50% !important;">
              <label [for]="'attrName'+i" class="robotoregular txt mb">Attribute Name <span class="star">*</span></label>
              <input class="form-control" type="text" [id]="'attrName'+i" [(ngModel)]="attr.name" placeholder="Enter attribute name">
            </div>
            <div  style="width: 50% !important;">
              <label [for]="'attrType'+i" class="robotoregular txt mb">Attribute Type <span class="star">*</span></label>
              <div class="form-group position-relative">
                <select class="form-control custom-select-icon" [id]="'attrType'+i" [(ngModel)]="attr.type">
                  <option value="string">Free Text</option>
                  <option value="list">List of Values</option>
                </select>
                <span class="dropdown-icon">
                  <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
              </div>
            </div>
            <div style="width: 50% !important;">
              <label class="robotoregular txt mb">Barrier Values</label>
              <div class="d-flex">
                <input type="text" class="form-control" [(ngModel)]="attr.barrierInput" placeholder="Enter barrier value">
              </div>
            </div>
            <div class="wid3">
              <button class="btn btn-dark mt-3 valuebtn robotosemibold" (click)="addBarrierValue(i)">+ Value</button>
            </div>
          </div>
          <button class="btn btn-link " (click)="removeAttribute(i)" style="margin-top: 10px;">
           <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M15 0.5H33C41.0081 0.5 47.5 6.99187 47.5 15V33C47.5 41.0081 41.0081 47.5 33 47.5H15C6.99187 47.5 0.5 41.0081 0.5 33V15C0.5 6.99187 6.99187 0.5 15 0.5Z" stroke="#0F0F0F"/>
<path d="M17.75 19.25H30.25" stroke="#EC1919" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M21.75 19.25V17.75C21.75 17.198 22.198 16.75 22.75 16.75H25.25C25.802 16.75 26.25 17.198 26.25 17.75V19.25" stroke="#EC1919" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M28.75 21.75V29.25C28.75 30.355 27.855 31.25 26.75 31.25H21.25C20.145 31.25 19.25 30.355 19.25 29.25V21.75" stroke="#EC1919" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M22.25 23.75V28.25" stroke="#EC1919" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M25.75 23.75V28.25" stroke="#EC1919" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

          </button>
        </div>
       <div class="d-flex" style="margin-top: 14px;">
  <div style="width: 52%;" class="d-flex flex-column">
    <div class="d-flex">
      <div style="width: 50%;">
        <div class="d-flex align-items-center gap-2 mt-3">
          <input class="check1" type="checkbox" [(ngModel)]="attr.editableInBackOffice" [id]="'editableAttr'+i">
          <p class="robotoregular txt2 mb-0">Editable in Back Office</p>
        </div>
      </div>
      <div style="width: 50%;">
        <div class="d-flex align-items-center gap-2 mt-3">
          <input class="check1" type="checkbox" [(ngModel)]="attr.hideForMobile" [id]="'hideAttr'+i">
          <p class="robotoregular txt2 mb-0">Hide for Mobile</p>
        </div>
      </div>
    </div>
    <div style="width: 100%;" class="d-flex align-items-center gap-2 mt-3">
      <input class="check1" type="checkbox" [(ngModel)]="attr.isConditional" [id]="'conditionalAttr'+i" (change)="toggleCheckbox(i, 'isConditional', $event)">
      <p class="robotoregular txt2 mb-0">Conditional Attribute</p>
    </div>
  </div>
  <div class="d-flex ms-1" style="width: 40%;">
    <div class="mt-2 d-flex flex-wrap">
      <span *ngFor="let value of attr.barrierValues; let j = index" class="bg12 d-inline-block position-relative">
        {{ value }}
        <button class="btn1cls" (click)="removeBarrierValue(j, i)"></button>
      </span>
    </div>
  </div>
</div>
        <div class="col-12 mt-3">
          
          <div class="mt-2" *ngIf="attr.isConditional">
            <div class="row">
              <div class="col-6">
                <label class="robotoregular txt mb-1">Product ID</label>
                <div class="form-group position-relative">
                  <select class="form-control custom-select-icon" [id]="'attrProductId'+i" [(ngModel)]="attr.productId" (change)="onConditionalProductChange(i)">
                    <option value="" disabled>Select a product</option>
                    <option *ngFor="let product of products" [value]="product.id">{{ product.name }}</option>
                  </select>
                  <span class="dropdown-icon">
                    <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                </div>
              </div>
              <div class="col-6">
                <label class="robotoregular txt mb-1">Approval Document</label>
                <div class="form-group position-relative">
                  <select class="form-control custom-select-icon" [id]="'attrApprovalDocument'+i" (change)="addAdditionalConditionalApprovalDocument(i, $event)">
                    <option value="" disabled selected>Select an approval document</option>
                    <option *ngFor="let doc of attr.filteredApprovalDocuments" [value]="doc.id">{{ doc.name }}</option>
                  </select>
                  <span class="dropdown-icon">
                    <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </span>
                </div>
                <div class="mt-2 d-flex flex-wrap gap-2">
                  <span *ngFor="let docId of attr.selectedApprovalDocuments; let j = index" class="bg12 d-inline-block position-relative">
                    {{ getApprovalDocumentName(docId) }}
                    <button class="btn1cls" (click)="removeAdditionalConditionalApprovalDocument(i, j)"></button>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Add Attribute Button -->
      <div class="text-center">
        <button class="valuebtn onestbold" style="width:200px" (click)="addAttribute()">+ Attribute</button>
      </div>

      <!-- Submit Button -->
      <div class="text-center mt-3">
        
<button class="btn onestsemibold back1123" onclick="document.getElementById('project-attributes-tab').click()">
  <span class="me-2">
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.75 9H15.25" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7 13.25L2.75 9L7 4.75" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

  </span>
  Back 
</button>
        <button class="btn btn-primary123 onestbold" style="width:200px" (click)="submitStandardAttributes()">Next
          <span class="ms-1" style="margin-top: -2px;">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.75 8.75H15C15.1379 8.75 15.25 8.86214 15.25 9C15.25 9.13786 15.1379 9.25 15 9.25H2.75C2.61214 9.25 2.5 9.13786 2.5 9C2.5 8.86214 2.61214 8.75 2.75 8.75Z" fill="white" stroke="white"/>
<path d="M10.9997 14C10.8077 14 10.6158 13.927 10.4698 13.78C10.1768 13.487 10.1768 13.012 10.4698 12.719L14.1897 8.99901L10.4698 5.27901C10.1768 4.98601 10.1768 4.51101 10.4698 4.21801C10.7628 3.92501 11.2377 3.92501 11.5307 4.21801L15.7807 8.46801C16.0738 8.76101 16.0738 9.23601 15.7807 9.52901L11.5307 13.779C11.3847 13.925 11.1928 13.999 11.0008 13.999L10.9997 14Z" fill="white"/>
</svg>

           </span>
        </button>
      </div>
    </div>
    <div class="col-3 p-0">
     <div class="card">
  <p class="onestbold">Assign Employees</p>
  <div class="custom-dropdown" id="dropdown-toggle-5" (click)="toggleDropdown5($event)">
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M4 6.25H14" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M9 2.25V4" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M5.25781 6.25C5.38681 4.295 7.01281 2.75 8.99981 2.75C10.9868 2.75 12.6128 4.295 12.7418 6.25" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M2.95312 16C4.25112 14.042 6.47512 12.75 9.00012 12.75C11.5251 12.75 13.7491 14.041 15.0471 16" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M12.75 6.5C12.75 8.571 11.071 10.25 9 10.25C6.929 10.25 5.25 8.571 5.25 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <input type="text" class="form-control sek" [(ngModel)]="searchQuery" (input)="filterEmployees()" placeholder="Select employees" />
    <span class="arrow">
      <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.918 6.5L9.66797 12.75L3.41797 6.5" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </span>
    <div class="dropdown-menu" *ngIf="isDropdownOpen5" (click)="stopPropagation($event)">
      <div class="dropdown-item" *ngFor="let employee of filteredEmployees" (click)="selectOption5(employee.name, $event)">
        {{ employee.name }}
      </div>
    </div>
  </div>
  <div class="document-tags">
    <div *ngFor="let doc of selectedDocuments5; let i = index" class="document-badge-wrapper">
      <span class="remove-bt1 remove-btn" (click)="removeDocument5(doc)">
        <svg width="12" height="12" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 4L4 12" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M4 4L12 12" stroke="#FFFFFF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
      <span class="badge document-badge">
        <img src="/images/pi1.png" height="36" width="36" style="border-radius: 100%;" alt="">
        <span class="robotoregular" style="margin-left: 8px;">{{ doc }}</span>
      </span>
    </div>
  </div>
</div>
    </div>
  </div>
</div>






















    <!-- createproject.component.html -->
    <!-- Other sections (project details, standards, etc.) remain unchanged -->

    <!-- Building Hierarchy Section -->
   <div id="building-hierarchy" class="tab-pane fade" [ngClass]="{'show active': activeTab === 'buildingHierarchy'}">
  <div class="row">
    <div class="card col-8">
      <div class="card-body">
        <h5 class="card-title onestbold">Building Hierarchy</h5>
        <form (ngSubmit)="onFormSubmit($event)">
          <div *ngFor="let level of hierarchyLevelsInput; let i = index" class="mb-3">
            <label for="hierarchyLevel{{i}}" class="form-label robotoregular">Level Name</label>
            <div class="input-group">
              <input type="text" class="form-control" id="hierarchyLevel{{i}}" [(ngModel)]="level.name"
                name="hierarchyLevel{{i}}" placeholder="Enter level name" (keydown)="onInputKeydown($event)">
              <button type="button" class="btn btn-danger1 mt-2 robotosemibold" (click)="removeHierarchyLevel(i)"
                *ngIf="hierarchyLevelsInput.length > 1">Remove</button>
            </div>
          </div>
          <div class="d-flex gap-2 justify-content-center mt-4">
            <button type="button" class="btn hierbtn robotosemibold" (click)="addHierarchyLevel()">Add Level</button>
            <button type="button" class="btn onestsemibold back11" (click)="goToStandardsTab()">
              <span class="me-2">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M2.75 9H15.25" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M7 13.25L2.75 9L7 4.75" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </span>
              Back 
            </button>
            <button type="button" class="btn btn-primary124 robotosemibold" (click)="submitHierarchy()">Next
              <span class="ms-1" style="margin-top: -2px;">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M2.75 8.75H15C15.1379 8.75 15.25 8.86214 15.25 9C15.25 9.13786 15.1379 9.25 15 9.25H2.75C2.61214 9.25 2.5 9.13786 2.5 9C2.5 8.86214 2.61214 8.75 2.75 8.75Z" fill="white" stroke="white"/>
                  <path d="M10.9997 14C10.8077 14 10.6158 13.927 10.4698 13.78C10.1768 13.487 10.1768 13.012 10.4698 12.719L14.1897 8.99901L10.4698 5.27901C10.1768 4.98601 10.1768 4.51101 10.4698 4.21801C10.7628 3.92501 11.2377 3.92501 11.5307 4.21801L15.7807 8.46801C16.0738 8.76101 16.0738 9.23601 15.7807 9.52901L11.5307 13.779C11.3847 13.925 11.1928 13.999 11.0008 13.999L10.9997 14Z" fill="white"/>
                </svg>
              </span>
            </button>
          </div>
        </form>
      </div>
    </div>
    <div class="col-4">
      <div class="card">
        <p class="onestbold head2">Configuration</p>
        <p class="onestsemibold txt2">Standard Configuration</p>
        <p class="robotoregular">Hierarchy 2: Floor</p>
        <p class="robotoregular">Hierarchy 3: Room</p>
        <p class="robotoregular">Hierarchy 4: Empty</p>
        <p class="onestsemibold txt2">Advanced Configuration for Advanced Users</p>
        <p class="robotoregular">Hierarchy 2: Floor</p>
        <p class="robotoregular">Hierarchy 3: Firezone</p>
        <p class="robotoregular">Hierarchy 4: Room</p>
      </div>
    </div>
  </div>
</div>









    <div class="tab-pane fade" id="upload-documents" role="tabpanel">
      <div class="">
        <div class="row">
          <!-- 2D Plans Section -->
          <div class="col-md-4 mb-3">
            <div class="card h-100">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h6 class="card-subtitle text-muted onestbold">2D Plans</h6>
                  <div class="dropdown11">
                    <button type="button" class="btn btn-outline-primary btn-sm add-btn">+ Add</button>
                    <div class="dropdown-menu11">
                      <a class="dropdown-item11" href="#" data-bs-toggle="modal"
                        data-bs-target="#singleFileModal2D">Single File Upload</a>
                      <a class="dropdown-item11" href="#" data-bs-toggle="modal" data-bs-target="#bulkFilesModal2D">Bulk
                        File Upload</a>
                    </div>
                  </div>
                </div>
                <div class="file-list mt-4">
                  <!-- Show documents if available, else show "No Document" -->
                  <div *ngIf="twoDFiles.length > 0; else noDocuments2D">
                    <div *ngFor="let file of twoDFiles"
                      class="file-item d-flex justify-content-between align-items-center p-2 mb-2 rounded">
                      <div class="d-flex align-items-center">
                        <app-svg-icons icon="fil" size="16"></app-svg-icons>
                        <div class="ms-2">
                          <p class="mb-0 h1 robotoregular">{{ file.documentName }}</p>
                          <small class="text-muted h2 robotoregular">{{ getFileExtension(file.documentName) }}</small>
                        </div>
                      </div>
                      <div class="d-flex align-items-center">
                        <span class="h1 robotoregular text-dark me-2">{{ getHierarchyLevelName(file.hierarchyLevel)
                          }}</span>
                        <app-svg-icons icon="delete" size="16"></app-svg-icons>
                      </div>
                    </div>
                  </div>
                  <ng-template #noDocuments2D>
                    <p class="text-muted text-center robotoregular">No Document</p>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>

          <!-- Technical Documents Section -->
          <div class="col-md-4 mb-3">
            <div class="card h-100">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h6 class="card-subtitle text-muted onestbold">Technical Documents</h6>
                  <div class="dropdown11">
                    <button type="button" class="btn btn-outline-primary btn-sm add-btn">+ Add</button>
                    <div class="dropdown-menu11">
                      <a class="dropdown-item11" href="#" data-bs-toggle="modal"
                        data-bs-target="#singleFileModalTechnical">Single File Upload</a>
                      <a class="dropdown-item11" href="#" data-bs-toggle="modal"
                        data-bs-target="#bulkFilesModalTechnical">Bulk File Upload</a>
                    </div>
                  </div>
                </div>
                <div class="file-list mt-4">
                  <!-- Show documents if available, else show "No Document" -->
                  <div *ngIf="technicalFiles.length > 0; else noDocumentsTechnical">
                    <div *ngFor="let file of technicalFiles"
                      class="file-item d-flex justify-content-between align-items-center p-2 mb-2 rounded">
                      <div class="d-flex align-items-center">
                        <app-svg-icons icon="fil" size="16"></app-svg-icons>
                        <div class="ms-2">
                          <p class="mb-0 robotoregular h1 ">{{ file.documentName }}</p>
                          <small class="text-muted h2 robotoregular">{{ getFileExtension(file.documentName) }}</small>
                        </div>
                      </div>
                      <div class="d-flex align-items-center">
                        <span class="h1 robotoregular text-dark me-2">{{ getHierarchyLevelName(file.hierarchyLevel)
                          }}</span>
                        <app-svg-icons icon="delete" size="16"></app-svg-icons>
                      </div>
                    </div>
                  </div>
                  <ng-template #noDocumentsTechnical>
                    <p class="text-muted text-center robotoregular">No Document</p>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>

          <!-- Additional Documents Section -->
          <div class="col-md-4 mb-3">
            <div class="card h-100">
              <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-2">
                  <h6 class="card-subtitle text-muted onestbold">Additional Documents</h6>
                  <div class="dropdown11">
                    <button type="button" class="btn btn-outline-primary btn-sm add-btn">+ Add</button>
                    <div class="dropdown-menu11">
                      <a class="dropdown-item11" href="#" data-bs-toggle="modal"
                        data-bs-target="#singleFileModalAdditional">Single File Upload</a>
                      <a class="dropdown-item11" href="#" data-bs-toggle="modal"
                        data-bs-target="#bulkFilesModalAdditional">Bulk File Upload</a>
                    </div>
                  </div>
                </div>
                <div class="file-list mt-4">
                  <!-- Show documents if available, else show "No Document" -->
                  <div *ngIf="additionalFiles.length > 0; else noDocumentsAdditional">
                    <div *ngFor="let file of additionalFiles"
                      class="file-item d-flex justify-content-between align-items-center p-2 mb-2 rounded">
                      <div class="d-flex align-items-center">
                        <app-svg-icons icon="fil" size="16"></app-svg-icons>
                        <div class="ms-2">
                          <p class="mb-0 h1 robotoregular">{{ file.documentName }}</p>
                          <small class="text-muted h2">{{ getFileExtension(file.documentName) }}</small>
                        </div>
                      </div>
                      <div class="d-flex align-items-center">
                        <span class="robotoregular h1 text-dark me-2">{{ getHierarchyLevelName(file.hierarchyLevel)
                          }}</span>
                        <app-svg-icons icon="delete" size="16"></app-svg-icons>
                      </div>
                    </div>
                  </div>
                  <ng-template #noDocumentsAdditional>
                    <p class="text-muted text-center robotoregular">No Document</p>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Next Button -->
        <div class="d-flex justify-content-end mt-3">
          <button class="btn onestsemibold back23" onclick="document.getElementById('building-hierarchy-tab').click()">
  <span class="me-2">
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.75 9H15.25" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
<path d="M7 13.25L2.75 9L7 4.75" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>

  </span>
  Back 
</button>
         
        </div>
      </div>
    </div>

    <div class="modal right fade" id="singleFileModal2D" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title onestbold">2D Plan</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              (click)="closeModal()"></button>
          </div>
          <div class="modal-body">
            <h6 class="onestbold mb-3">Document Info</h6>
            <!-- Drag and Drop Area -->
            <div class="mb-3 text-center b12 rounded p-4" (click)="singleFileInput2D.click()">
              <app-svg-icons icon="fil2" size="16"></app-svg-icons>
              <p class="mt-2 mb-0 robotoregular">Drag & Drop or Browse</p>
              <input type="file" id="singleFileInput2D" class="d-none" (change)="onSingleFileChange($event, '2D Plan')"
                #singleFileInput2D />
            </div>
            <div class="mb-3">
              <label for="hierarchyLevel2D" class="form-label">Hierarchy Level</label>
              <select id="hierarchyLevel2D" class="form-select" [(ngModel)]="selectedHierarchyLevel">
                <option value="" disabled>Select a hierarchy level</option>
                <option *ngFor="let level of hierarchyLevels" [value]="level.id">{{ level.name }}</option>
              </select>
            </div>
            <div *ngIf="singleFile2D" class="mt-3">
              <div class="cd11">
                <p class="mb-1"><i class="bi bi-file-earmark-text me-2"></i>{{ singleFile2D.name }}</p>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn savbtn onestbold txt2" (click)="saveSingleFile('2D Plan')">
              <app-svg-icons icon="save" size="16"></app-svg-icons>
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal right fade" id="bulkFilesModal2D" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title onestbold">2D Plan</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              (click)="closeModal()"></button>
          </div>
          <div class="modal-body">
            <h6 class="onestbold mb-3">Document Info</h6>
            <!-- Drag and Drop Area -->
            <div class="mb-3 text-center b12 rounded p-4" (click)="bulkFileInput2D.click()">
              <app-svg-icons icon="fil2" size="16"></app-svg-icons>
              <p class="mt-2 mb-0 robotoregular">Drag & Drop or Browse</p>
              <input type="file" id="bulkFileInput2D" class="d-none" multiple #bulkFileInput2D
                (change)="onBulkFilesChange($event)" />
            </div>
            <div class="mb-3">
              <label for="hierarchyLevelBulk2D" class="form-label">Hierarchy Level</label>
              <select id="hierarchyLevelBulk2D" class="form-select" [(ngModel)]="selectedHierarchyLevel">
                <option value="" disabled>Select a hierarchy level</option>
                <option *ngFor="let level of hierarchyLevels" [value]="level.id">{{ level.name }}</option>
              </select>
            </div>
            <div *ngIf="bulkFiles.length > 0" class="mt-3">
              <h6>Selected Files:</h6>
              <ul>
                <li *ngFor="let file of bulkFiles; let i = index" class="list12">
                  <input type="text" class="form-control mb-2" [(ngModel)]="documentNames[i]"
                    placeholder="Document Name (optional)" />
                </li>
              </ul>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn savbtn onestbold txt2" (click)="saveBulkFiles('2D Plan')">
              <app-svg-icons icon="save" size="16"></app-svg-icons>
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal right fade" id="singleFileModalTechnical" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title onestbold">Technical Documents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              (click)="closeModal()"></button>
          </div>
          <div class="modal-body">
            <h6 class="onestbold mb-3">Document Info</h6>
            <!-- Drag and Drop Area -->
            <div class="mb-3 text-center b12 rounded p-4" (click)="singleFileInputTechnical.click()">
              <app-svg-icons icon="fil2" size="16"></app-svg-icons>
              <p class="mt-2 mb-0 robotoregular">Drag & Drop or Browse</p>
              <input type="file" id="singleFileInputTechnical" class="d-none"
                (change)="onSingleFileChange($event, 'Technical Document')" #singleFileInputTechnical />
            </div>
            <div class="mb-3">
              <label for="hierarchyLevelTechnical" class="form-label">Hierarchy Level</label>
              <select id="hierarchyLevelTechnical" class="form-select" [(ngModel)]="selectedHierarchyLevel">
                <option value="" disabled>Select a hierarchy level</option>
                <option *ngFor="let level of hierarchyLevels" [value]="level.id">{{ level.name }}</option>
              </select>
            </div>
            <div *ngIf="singleFileTechnical" class="mt-3">
              <div class=" cd11">
                <div class=" d-flex align-items-center">
                  <div class="flex-grow-1">
                    <p class="mb-1 mx-2">
                   
                      {{ singleFileTechnical.name }}
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn savbtn onestbold txt2" (click)="saveSingleFile('Technical Document')">
              <app-svg-icons icon="save" size="16"></app-svg-icons>
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bulk Files Modal for Technical Documents -->
    <div class="modal right fade" id="bulkFilesModalTechnical" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title onestbold">Technical Documents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              (click)="closeModal()"></button>
          </div>
          <div class="modal-body">
            <h6 class="onestbold mb-3">Document Info</h6>
            <!-- Drag and Drop Area -->
            <div class="mb-3 text-center b12 rounded p-4" (click)="bulkFileInputTechnical.click()">
              <app-svg-icons icon="fil2" size="16"></app-svg-icons>
              <p class="mt-2 mb-0 robotoregular">Drag & Drop or Browse</p>
              <input type="file" id="bulkFileInputTechnical" class="d-none" multiple #bulkFileInputTechnical
                (change)="onBulkFilesChange($event)" />
            </div>
            <div class="mb-3">
              <label for="hierarchyLevelBulkTechnical" class="form-label">Hierarchy Level</label>
              <select id="hierarchyLevelBulkTechnical" class="form-select" [(ngModel)]="selectedHierarchyLevel">
                <option value="" disabled>Select a hierarchy level</option>
                <option *ngFor="let level of hierarchyLevels" [value]="level.id">{{ level.name }}</option>
              </select>
            </div>
            <div *ngIf="bulkFiles.length > 0" class="mt-3">
              <ul>
                <li *ngFor="let file of bulkFiles; let i = index">
                  <input type="text" class="form-control mb-2" [(ngModel)]="documentNames[i]"
                    placeholder="Document Name (optional)" />

                </li>
              </ul>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn savbtn onestbold txt2" (click)="saveBulkFiles('Technical Document')">
              <app-svg-icons icon="save" size="16"></app-svg-icons>
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal right fade" id="singleFileModalAdditional" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title onestbold">Additional Documents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              (click)="closeModal()"></button>
          </div>
          <div class="modal-body">
            <h6 class="onestbold mb-3">Document Info</h6>
            <!-- Drag and Drop Area -->
            <div class="mb-3 text-center borderconventional b12rounded p-4" (click)="singleFileInputAdditional.click()">
              <app-svg-icons icon="fil2" size="16"></app-svg-icons>
              <p class="mt-2 mb-0 robotoregular">Drag & Drop or Browse</p>
              <input type="file" id="singleFileInputAdditional" class="d-none"
                (change)="onSingleFileChange($event, 'Additional Document')" #singleFileInputAdditional />
            </div>
            <div class="mb-3">
              <label for="hierarchyLevelAdditional" class="form-label">Hierarchy Level</label>
              <select id="hierarchyLevelAdditional" class="form-select" [(ngModel)]="selectedHierarchyLevel">
                <option value="" disabled>Select a hierarchy level</option>
                <option *ngFor="let level of hierarchyLevels" [value]="level.id">{{ level.name }}</option>
              </select>
            </div>
            <div *ngIf="singleFileAdditional" class="mt-3">
              <div class="cd11">
                <div class=" d-flex align-items-center">
                  <div class="flex-grow-1">
                    <p class="mb-1"><i class="bi bi-file-earmark-text me-2"></i>{{ singleFileAdditional.name }}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn savbtn onestbold txt2" (click)="saveSingleFile('Additional Document')">
              <app-svg-icons icon="save" size="16"></app-svg-icons>
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bulk Files Modal for Additional Documents -->
    <div class="modal right fade" id="bulkFilesModalAdditional" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title onestbold">Additional Documents</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
              (click)="closeModal()"></button>
          </div>
          <div class="modal-body">
            <h6 class="onestbold mb-3">Document Info</h6>
            <!-- Drag and Drop Area -->
            <div class="mb-3 text-center b12 rounded p-4" (click)="bulkFileInputAdditional.click()">
              <app-svg-icons icon="fil2" size="16"></app-svg-icons>
              <p class="mt-2 mb-0 robotoregular">Drag & Drop or Browse</p>
              <input type="file" id="bulkFileInputAdditional" class="d-none" multiple #bulkFileInputAdditional
                (change)="onBulkFilesChange($event)" />
            </div>
            <div class="mb-3">
              <label for="hierarchyLevelBulkAdditional" class="form-label">Hierarchy Level</label>
              <select id="hierarchyLevelBulkAdditional" class="form-select" [(ngModel)]="selectedHierarchyLevel">
                <option value="" disabled>Select a hierarchy level</option>
                <option *ngFor="let level of hierarchyLevels" [value]="level.id">{{ level.name }}</option>
              </select>
            </div>
            <div *ngIf="bulkFiles.length > 0" class="mt-3">
              <ul>
                <li *ngFor="let file of bulkFiles; let i = index">
                  <input type="text" class="form-control mb-2" [(ngModel)]="documentNames[i]"
                    placeholder="Document Name (optional)" />
                </li>
              </ul>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn savbtn onestbold txt2" (click)="saveBulkFiles('Additional Document')">
              <app-svg-icons icon="save" size="16"></app-svg-icons>
              Save
            </button>
          </div>
        </div>
      </div>
    </div>







    <div class="tab-pane fade" id="reports" role="tabpanel">
<!-- Back Button for Standards Attribute Tab -->

<!-- Back Button for Upload Documents Tab -->

<!-- Back Button for Building Hierarchy Tab -->

      <div class="row">
        <div class="col-12 text-end" style="margin-bottom:24px">
          <button class="w3btn" (click)="openModal()">+ Report</button>
        </div>
        <div *ngIf="reports.length === 0" class="col-12 text-center">
          <p>No reports yet</p>
        </div>
        <div *ngFor="let report of reports" class="col-2">
          <div class="card">
            <span class="text-end">
                            <app-svg-icons icon="drop" size="16"></app-svg-icons>

            </span>
            <div class="d-flex justify-content-center">
                            <app-svg-icons icon="fil2" size="16"></app-svg-icons>

            </div>
            <p class="robotobold txt2 text-center">{{ report.coverLetter.reportTitle }}</p>
            <p class="robotoregular text-center txt">{{ getFileExtension(report.reportPDF) }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- </div> -->


















    <!-- Report Button -->

    <!-- Modal (Slide-in from Right) -->

<div *ngIf="isOpen">
  <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 40;"></div>
  <div style="position: fixed; right: 0; top: 0; width: 600px; height: 100%; background: #EEF0F1; z-index: 50; transform: translateX(0); display: flex; flex-direction: column; border-radius: 20px 0 0 20px;">
    <div style="position: sticky; top: 0; z-index: 60; background: #EEF0F1; border-bottom: 1px solid #e5e7eb; padding: 16px; display: flex; justify-content: space-between; align-items: center; border-radius: 20px 0 0 20px;">
      <h2 style="font-weight: bold;">Report</h2>
      <button (click)="closeModal()" style="border:0px">
        <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 10C0 4.47715 4.47715 0 10 0H30C35.5228 0 40 4.47715 40 10V30C40 35.5228 35.5228 40 30 40H10C4.47715 40 0 35.5228 0 30V10Z" fill="white"/>
          <path d="M25 15L15 25" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M15 15L25 25" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
    <div style="flex: 1; overflow-y: auto; padding: 16px;">
      <div style="background:white; padding:16px; border-radius:15px">
        <p class="onestbold">Report Type</p>
        <div id="dropdown-toggle-4" (click)="toggleDropdown4($event)" style="display: flex; align-items: center; height:50px; gap: 8px; border: 1px solid #e5e7eb; border-radius: 15px; padding: 10px;">
          <span>
            <app-svg-icons icon="fil4" size="16"></app-svg-icons>
          </span>
          <input type="text" [value]="selectedOption4" placeholder="Select an option" readonly style="flex: 1; padding: 0; border: none; outline: none; background: transparent;" />
          <span>
            <app-svg-icons icon="down" size="16"></app-svg-icons>
          </span>
        </div>
        <div *ngIf="isDropdownOpen4" style="background: #F9FAFB; border: 1px solid #e5e7eb; border-radius: 15px; width: 100%; margin-top: 4px;">
          <div (click)="selectOption4('Standard Reports', $event)" style="padding: 8px; cursor: pointer;">Standard Reports</div>
          <div (click)="selectOption4('2D', $event)" style="padding: 8px; cursor: pointer;">2D</div>
          <div (click)="selectOption4('Excel', $event)" style="padding: 8px; cursor: pointer;">Excel</div>
        </div>
        <div style="margin-top: 16px">
          <div id="dropdown-toggle-subproject" (click)="toggleSubProjectDropdown($event)" style="display: flex; align-items: center; height:50px; gap: 8px; border: 1px solid #e5e7eb; border-radius: 15px; padding: 10px;">
            <span>
              <app-svg-icons icon="fil4" size="16"></app-svg-icons>
            </span>
            <input type="text" [value]="selectedSubProject || 'Select a sub-project'" placeholder="Select a sub-project" readonly style="flex: 1; padding: 0; border: none; outline: none; background: transparent;" />
            <span>
              <app-svg-icons icon="down" size="16"></app-svg-icons>
            </span>
          </div>
          <div *ngIf="isSubProjectDropdownOpen" style="background: #F9FAFB; border: 1px solid #e5e7eb; border-radius: 15px; width: 100%; margin-top: 4px;">
            <div *ngFor="let subProject of subProjects" (click)="selectSubProject(subProject, $event)" style="padding: 8px; cursor: pointer;">{{subProject}}</div>
            <div *ngIf="!subProjects || subProjects.length === 0" style="padding: 8px;">No sub-projects available</div>
          </div>
          <div *ngIf="selectedSubProject" style="margin-top: 12px; padding: 8px; border: 1px solid #182a4d; border-radius: 15px;">
            <div style="display: flex; align-items: center;">
              <span>{{selectedSubProject}}</span>
              <button (click)="removeSubProject()" style="margin-left: 8px;">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M0 9C0 4.02944 4.02944 0 9 0C13.9706 0 18 4.02944 18 9C18 13.9706 13.9706 18 9 18C4.02944 18 0 13.9706 0 9Z" fill="#EC1919"/>
                  <path d="M12.3327 5.6665L5.66602 12.3332" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  <path d="M5.66602 5.6665L12.3327 12.3332" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
      
      <div style="margin-top: 16px;">
        <div style="margin-left: 16px; display: flex; align-items: center; margin-bottom: 12px;">
          <input type="checkbox" name="" id="" (change)="toggleSelectAll()" style="width: 20px; height: 20px; margin-right: 8px; border: 1px solid #e5e7eb; border-radius: 4px;">
          <p style="margin: 0;">Select All</p>
        </div>
        <div *ngIf="isLoadingAttributes" style="text-align: center; margin: 12px 0;">
          <div style="display: inline-block; border: 4px solid #3b82f6; border-top: 4px solid transparent; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite;"></div>
          <p style="margin-top: 8px; color: #6b7280;">Loading attributes...</p>
        </div>
        <div *ngIf="!isLoadingAttributes && standardAttributes && standardAttributes.attributes && standardAttributes.attributes.length > 0">
          <div *ngFor="let attr of standardAttributes.attributes" style="margin-bottom: 8px; padding: 16px; border: 1px solid #e5e7eb; border-radius: 15px; display: flex; align-items: flex-end; background: #FFFFFF;">
            <input type="checkbox" name="" id="dynamic-{{attr._id}}" [(ngModel)]="selectedFields[attr.name]" style="width: 20px; height: 20px; margin-right: 8px; margin-bottom: 8px;">
            <div style="flex: 1;">
              <p style="font-size: 14px; margin: 0 0 4px 0;">{{attr.name}}</p>
              <input type="text" [value]="attr.type === 'list' ? attr.value.join(', ') : attr.value" readonly style="width: 100%; padding: 8px; border: 1px solid #CDCCCB; text-align: left; border-radius: 15px; outline: none;" class="attribute-field">
              <div *ngIf="attr.conditionalAttribute && attr.conditionalAttribute.isEnabled" style="margin-top: 4px;">
                <small style="color: #6b7280;">
                  <span *ngIf="attr.conditionalAttribute.productId">Linked to product</span>
                  <span *ngIf="attr.conditionalAttribute.productId && attr.conditionalAttribute.approvalDocumentId"> | </span>
                  <span *ngIf="attr.conditionalAttribute.approvalDocumentId">Requires approval</span>
                </small>
              </div>
            </div>
          </div>
        </div>
        <div *ngIf="!isLoadingAttributes && (!standardAttributes || !standardAttributes.attributes || standardAttributes.attributes.length === 0)" style="padding: 12px; border: 1px solid #60a5fa; border-radius: 15px; margin-top: 12px; background: #FFFFFF;">
          <p style="margin: 0;">No dynamic attributes available for this project. Please create standard attributes first.</p>
        </div>
      </div>
    </div>
    <div style="position: sticky; bottom: 0; z-index: 60; border-radius: 20px 0 0 20px; background: #EEF0F1; padding: 16px; border-top: 1px solid #e5e7eb;">
      <button (click)="saveFormDataBeforeNavigation()" [routerLink]="['/pages/coverletter']" [queryParams]="{returnTo: 'reports', from: 'reports'}" style="display: block; width: 100%; padding: 8px; margin-bottom: 8px; border: 1px solid #000000; border-radius: 15px; background:rgba(255, 0, 0, 0); height:56px">
        <app-svg-icons icon="fil6" size="16"></app-svg-icons>
        Cover Letter
      </button>
      <button type="button" (click)="generateReport()" style="display: block; width: 100%; padding: 8px; background: #0F0F0F; color: white; border-radius: 15px; height:56px">
        <app-svg-icons icon="fil5" size="16"></app-svg-icons>
        Generate Report
      </button>
    </div>
  </div>
</div>




    <!-- Add these modal divs after your dropdown menu -->
    <div class="modal right fade" id="singleFileModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title onestbold">2D Plan</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <!-- Single file upload content here -->
            <div class="card card3">
              <p class="onestsemibold txt2">Document Info</p>
              <div class="document-upload ">
                <div class="upload-box ">
                  <span class="mt-2">
                  
                  </span>
                  <p>Drag and Drop or <br> Browse</p>
                </div>
              </div>
              <div class="mrgntop">
                <p class="robtotoregular txt" style="line-height: 0px;">Document Name</p>
                <div class="input-container">
                 

                  <input type="text">
                </div>
              </div>
              <div class="mrgntop">
                <p class="robtotoregular txt" style="line-height: 0px;">Hierarchy Level</p>
                <div class="input-container">
                 

                  <input type="text">
                </div>
              </div>
              <button class="robotosemibold text2 btnbtm"><svg width="19" height="18" viewBox="0 0 19 18" fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M12.5 7.25H14.25C15.355 7.25 16.25 8.145 16.25 9.25V13.75C16.25 14.855 15.355 15.75 14.25 15.75H4.75C3.645 15.75 2.75 14.855 2.75 13.75V9.25C2.75 8.145 3.645 7.25 4.75 7.25H6.5"
                    stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                  <path d="M6.5 4.25L9.5 1.25L12.5 4.25" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                  <path d="M9.5 1.25V12.75" stroke="#0F0F0F" stroke-width="1.5" stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
                Upload</button>
            </div>
            <div class="card card4" style="margin-top: 24px;">
              <div class="d-flex justify-content-between align-items-center">

                <div class="d-flex align-items-center">
                  <span style="margin-right: 8px;">
                    
                  </span>
                  <div class="mt-3">
                    <p class="robotoregular txt lh1" style="margin-bottom: 20px;">Document Name</p>
                    <p class="robotoregular txt lh1" style="color: rgba(164, 163, 162, 1);">Hierarchy Level </p>
                  </div>
                </div>
               

              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn savbtn onestbold txt2" data-bs-dismiss="modal"><svg width="19" height="18"
                viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M14.75 16.25L9.5 12.75L4.25 16.25V3.75C4.25 2.645 5.145 1.75 6.25 1.75H12.75C13.855 1.75 14.75 2.645 14.75 3.75V16.25Z"
                  stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              Save
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="modal right fade" id="bulkFilesModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title onestbold">2D Plan</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <!-- Single file upload content here -->
              <div class="card card3">
                <p class="onestsemibold txt2">Document Info</p>
                <div class="document-upload ">
                  <div class="upload-box">
                    <span class="mt-2">
                     
                    </span>
                    <p>Drag and Drop or <br> Browse</p>
                  </div>
                </div>
                <div class="mrgntop">
                  <p class="robtotoregular txt" style="line-height: 0px;">Document Name</p>
                  <div class="input-container">
                   
                    <input type="text">
                  </div>
                </div>
                <div class="mrgntop">
                  <p class="robtotoregular txt" style="line-height: 0px;">Hierarchy Level</p>
                  <div class="input-container">
                    

                    <input type="text">
                  </div>
                </div>
                <button class="robotosemibold text2 btnbtm">
                 
                  Upload</button>
              </div>
              <div class="card card4" style="margin-top: 24px;">
                <div class="d-flex justify-content-between align-items-center">

                  <div class="d-flex align-items-center">
                    <span style="margin-right: 8px;">
                     
                    </span>
                    <div class="mt-3">
                      <p class="robotoregular txt lh1" style="margin-bottom: 20px;">Document Name</p>
                      <p class="robotoregular txt lh1" style="color: rgba(164, 163, 162, 1);">Hierarchy Level </p>
                    </div>
                  </div>
                 

                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn savbtn onestbold txt2" data-bs-dismiss="modal"><svg width="19"
                  height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M14.75 16.25L9.5 12.75L4.25 16.25V3.75C4.25 2.645 5.145 1.75 6.25 1.75H12.75C13.855 1.75 14.75 2.645 14.75 3.75V16.25Z"
                    stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                Save
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>




    <app-foot></app-foot>