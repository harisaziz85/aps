<div class="container-fluid" style="background-color: #EEF0F1; padding:24px; min-height:150vh; padding-bottom:700px">
  <app-topbar heading="Projects and Buildings"></app-topbar>
  <app-navbar />
  <div class="content-wrapper" style="display: flex; gap: 24px;">
    <!-- Main Content Card -->
    <div class="main-content" style="flex: 2;">
      <div class="card" style="padding: 24px; background-color: #ffffff; border-radius: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div *ngIf="errorMessage">
          <p class="error" style="color: red;">{{ errorMessage }}</p>
        </div>
        <div *ngIf="successMessage">
          <p class="success" style="color: green;">{{ successMessage }}</p>
        </div>
        <div *ngIf="projectId">
          <div *ngIf="isLoading; else content">
            <p>Loading hierarchy levels...</p>
          </div>
          <ng-template #content>
            <h4 class="onestbold" style="margin-bottom: 24px;">Hierarchy Levels</h4>
            <div *ngIf="getHierarchyLevels().length > 0; else noLevels">
              <div *ngFor="let level of getHierarchyLevels(); let i = index" class="hierarchy-card" style="margin-bottom: 15px; display: flex; align-items: start; flex-direction:column; gap: 10px;">
                <label [for]="'level-' + i" class="onestregular">Hierarchy Level {{ i + 1 }}</label>
                <input 
                  [id]="'level-' + i" 
                  type="text" 
                  class="form-control"
                  [(ngModel)]="level.name"
                  (ngModelChange)="onLevelChange(i)"
                  placeholder="Enter hierarchy level name"
                />
                <button type="button" class="btn" style="background: black; color:white; border-radius:10px" (click)="removeHierarchyLevel(i)">Remove</button>
              </div>
            </div>
            <ng-template #noLevels>
              <p>No hierarchy levels available.</p>
            </ng-template>
            <div class="text-center">
              <button type="button" class="btn" style="margin-top: 25px; background:black;color:white;border-radius:20px; height:56px" (click)="addHierarchyLevel()">Add Hierarchy Level</button>
            </div>
          </ng-template>
        </div>
        <div *ngIf="!projectId">
          <p>No project ID provided in route</p>
          <p><strong>Project ID (from service):</strong> {{ serviceProjectId || 'Not set in service' }}</p>
        </div>
      </div>
    </div>
    <!-- Static Card on the Right -->
    <div class="side-card" style="flex: 1; background:#ffffff; border-radius: 20px; padding: 24px;">
      <p style="font-size:21px;" class="onestbold">Configuration</p>
      <p style="font-size: 16px;" class="onestbold">Standard Configuration</p>
      <div *ngIf="getHierarchyLevels().length > 0">
        <p *ngFor="let level of getHierarchyLevels(); let i = index" style="font-size: 14px;" class="onestregular">Hierarchy {{ i + 1 }}: {{ level.name }}</p>
      </div>
      <div *ngIf="getHierarchyLevels().length === 0">
        <p style="font-size: 14px;" class="onestregular">No hierarchy levels defined.</p>
      </div>
    </div>
  </div>
  <button type="button" class="btn btn-dark bts1" style="border-radius: 10px; background:black" (click)="saveAndNext()">Save and Next <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M2.75 8.75H15C15.1379 8.75 15.25 8.86214 15.25 9C15.25 9.13786 15.1379 9.25 15 9.25H2.75C2.61214 9.25 2.5 9.13786 2.5 9C2.5 8.86214 2.61214 8.75 2.75 8.75Z" fill="white" stroke="white"/>
<path d="M10.9997 14C10.8077 14 10.6158 13.927 10.4698 13.78C10.1768 13.487 10.1768 13.012 10.4698 12.719L14.1897 8.99901L10.4698 5.27901C10.1768 4.98601 10.1768 4.51101 10.4698 4.21801C10.7628 3.92501 11.2377 3.92501 11.5307 4.21801L15.7807 8.46801C16.0738 8.76101 16.0738 9.23601 15.7807 9.52901L11.5307 13.779C11.3847 13.925 11.1928 13.999 11.0008 13.999L10.9997 14Z" fill="white"/>
</svg>
</button>
</div>
<app-foot />